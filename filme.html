<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Filme</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white">

  <!-- Container principal -->
  <div id="app" class="min-h-screen">Carregando...</div>

  <script>
    const app = document.getElementById("app");
    const id = new URLSearchParams(location.search).get("id");

    // SUA CHAVE DO TMDB AQUI
    const API_KEY = "9a9a8c6e53bf1e6c407b689e729a43c9";

    if (!id) {
      app.innerHTML = "<h1 class='p-6'>ID do filme não informado.</h1>";
    } else {

      Promise.all([
        fetch("catalogo.json").then(r => r.json()),
        fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&language=pt-BR`).then(r => r.json()),
        fetch(`https://api.themoviedb.org/3/movie/${id}/credits?api_key=${API_KEY}&language=pt-BR`).then(r => r.json())
      ])
      .then(([lista, filme, creditos]) => {

        const local = lista.find(x => x.id == id);

        if (!local) {
          app.innerHTML = "<h1 class='p-6'>Filme não encontrado no catálogo.</h1>";
          return;
        }

        const backdrop = filme.backdrop_path 
          ? `https://image.tmdb.org/t/p/original${filme.backdrop_path}` 
          : "";

        const poster = filme.poster_path 
          ? `https://image.tmdb.org/t/p/w500${filme.poster_path}` 
          : local.capa;

        const elenco = (creditos.cast || []).slice(0, 10);

        app.innerHTML = `
          <!-- BANNER -->
<div class="relative h-[50vh] bg-cover bg-center"
     style="background-image:url('${backdrop}')">
  <div class="absolute inset-0 bg-black/70"></div>
</div>

<!-- CONTEÚDO NA FRENTE -->
<div class="relative z-10 max-w-6xl mx-auto -mt-32 p-6">

  <div class="flex gap-8">
    <img src="${poster}" class="w-56 rounded-xl shadow-2xl">

    <div>
      <h1 class="text-4xl font-bold">${titulo}</h1>
      <p class="mt-3 max-w-xl">${sinopse}</p>
    </div>
  </div>

  <!-- PLAYER LOGO ABAIXO -->
  <video class="mt-10 w-full rounded-xl" controls>
    <source src="${link}">
  </video>

</div>
        `;
      })
      .catch(err => {
        console.error(err);
        app.innerHTML = "<h1 class='p-6'>Erro ao carregar dados.</h1>";
      });
    }
  </script>

</body>
</html>
